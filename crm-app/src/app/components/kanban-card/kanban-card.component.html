<div
  (click)="onCardClick()"
  [ngClass]="{
    'border-slate-200/50 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600': task.status === 'todo',
    'border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-600': task.status === 'in-progress',
    'border-slate-200/50 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-600': task.status === 'done'
  }"
  class="group relative bg-white dark:bg-slate-800 rounded-lg p-4 shadow-sm hover:shadow-md cursor-pointer border transition-all duration-200">

  <button class="absolute right-2 opacity-0 group-hover:opacity-100 p-1 hover:bg-slate-50 dark:hover:bg-slate-700 rounded transition-opacity">
    <svg class="w-4 h-4 text-slate-400 dark:text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
    </svg>
  </button>

  <h4
    [ngClass]="{
      ' decoration-slate-300 dark:decoration-slate-600': task.status === 'done'
    }"
    class="text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">{{ task.title }}</h4>
  <p class="text-xs text-slate-600 dark:text-slate-400 mb-3 leading-relaxed" [class.mb-4]="!task.progressTime">{{ task.description }}</p>

  <div class="flex items-center pt-3 border-t border-slate-100 dark:border-slate-700" [class.border-slate-100]="task.status !== 'done'">
    <div class="flex grow items-center space-x-2">
      <div
        [ngStyle]="{'background': task.assignee.color}"
        class="w-6 h-6 rounded-md flex items-center justify-center text-xs text-white font-medium">
        {{ task.assignee.initials }}
      </div>
      <span class="text-xs text-slate-600 dark:text-slate-300 font-medium" [class.text-slate-600]="task.status !== 'done'">{{ task.assignee.name }}</span>
    </div>
    <div class="flex mr-2">
      <app-badge [config]="getPriorityBadge()"></app-badge>
    </div>
    <div class="flex items-center text-xs text-slate-500 dark:text-slate-400" [class.text-slate-500]="task.status !== 'done'">
      <svg class="w-3.5 h-3.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        @if (task.status !== 'done') {
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
        }
        @if (task.status === 'done') {
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        }
      </svg>
      {{ task.dueDate }}
    </div>
  </div>
</div>
